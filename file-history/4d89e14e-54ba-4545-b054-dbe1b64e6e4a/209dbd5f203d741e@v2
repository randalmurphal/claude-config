"""
Version comparison utilities for semantic versioning.

Handles version comparison without external dependencies.
"""

from typing import List


def parse_version(version: str) -> List[int]:
    """
    Parse semantic version string into list of integers.

    Args:
        version: Version string (e.g., "0.104.1", "v1.2.3-rc1")

    Returns:
        List of version parts as integers

    Examples:
        >>> parse_version("0.104.1")
        [0, 104, 1]
        >>> parse_version("v1.2.3-rc1")
        [1, 2, 3, 1]
    """
    v = version.lstrip('v')
    parts = v.split('.')
    nums = []

    for part in parts:
        num_str = ''.join(c for c in part if c.isdigit())
        nums.append(int(num_str) if num_str else 0)

    return nums


def compare_versions(v1: str, v2: str) -> int:
    """
    Compare two semantic version strings.

    Args:
        v1: First version
        v2: Second version

    Returns:
        -1 if v1 < v2
         0 if v1 == v2
         1 if v1 > v2

    Examples:
        >>> compare_versions("0.104.1", "0.105.0")
        -1
        >>> compare_versions("1.0.0", "0.9.9")
        1
        >>> compare_versions("1.2.3", "1.2.3")
        0
    """
    v1_parts = parse_version(v1)
    v2_parts = parse_version(v2)

    # Pad to same length
    max_len = max(len(v1_parts), len(v2_parts))
    v1_parts.extend([0] * (max_len - len(v1_parts)))
    v2_parts.extend([0] * (max_len - len(v2_parts)))

    for p1, p2 in zip(v1_parts, v2_parts):
        if p1 < p2:
            return -1
        elif p1 > p2:
            return 1

    return 0