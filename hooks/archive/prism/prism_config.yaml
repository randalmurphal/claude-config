# PRISM Hook Configuration
# Default settings for all PRISM-enabled Claude hooks

# Global intervention level
intervention_level: "balanced"  # minimal, balanced, aggressive

# PRISM service connections
prism:
  services:
    reasoning:
      enabled: true
      url: "localhost:50051"
      timeout_seconds: 5
    memory:
      enabled: true
      redis_url: "redis://localhost:6379/0"
      neo4j_url: "bolt://localhost:7687"
      qdrant_url: "http://localhost:6333"
    verification:
      enabled: true
      hallucination_threshold: 0.3
      confidence_threshold: 0.5
    embeddings:
      enabled: true
      model: "codet5"
      fallback_model: "all-MiniLM-L6-v2"

# Hook-specific settings
hooks:
  knowledge_validation:
    enabled: true
    truth_anchors:
      validate_against_sources: true
      source_weights:
        official_docs: 1.0
        test_results: 0.9
        community_patterns: 0.6
        llm_knowledge: 0.4
    contradiction_detection:
      similarity_threshold: 0.8
      auto_resolve: true
      mark_disputed_threshold: 3
    validation_execution:
      sandbox_timeout: 10
      max_memory_mb: 512
      enable_network: false
    multi_source_verification:
      require_confirmations: 2
      weighted_consensus: true
      confidence_boost: 0.1

  knowledge_immune_system:
    enabled: true
    confidence_management:
      decay_rate: 0.95  # per week
      reinforce_rate: 1.1
      revalidation_threshold: 0.5
      max_confidence: 0.98
    health_checks:
      interval_minutes: 60
      idle_trigger: true
      batch_size: 100
    garbage_collection:
      archive_threshold: 0.2
      unused_days: 30
      archive_location: "~/.claude/memory/archived/"
    learning_categories:
      validated_success: 0.95
      validated_failure: 0.95  # Anti-patterns are valuable!
      exploratory: 0.5
      hypothesis: 0.3
      contradictory: 0.2

  prism_read_memory:
    enabled: true
    max_memories: 5
    context_length: 2000
    include_warnings: true

  prism_write_validator:
    enabled: true
    validate_changes: true
    track_patterns: true

# Performance budgets (milliseconds)
performance:
  hook_timeout: 5000
  validation_timeout: 10000
  memory_query_timeout: 2000
  embedding_timeout: 3000

# Logging configuration
logging:
  level: "INFO"  # DEBUG, INFO, WARNING, ERROR
  file: "~/.claude/logs/prism_hooks.log"
  max_size_mb: 10
  backup_count: 3
  include_stack_traces: false

# Error handling
error_handling:
  fail_gracefully: true  # Continue if PRISM unavailable
  retry_attempts: 2
  retry_delay_seconds: 1
  circuit_breaker:
    failure_threshold: 5
    reset_timeout_seconds: 60